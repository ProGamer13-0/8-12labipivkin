{% extends "base.html" %}

{% block title %}–ü–∏—Ä–∞—Ç—Å–∫–∏–µ –ª–æ–≥–±—É–∫–∏{% endblock %}

{% block content %}
<div class="card fade-in">
    <div class="card-header" style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 20px;">
        <div>
            <h2 class="card-title" style="font-size: 2.2rem;">
                <i class="fas fa-book-journal-whills"></i> –ú–û–ò –õ–û–ì–ë–£–ö–ò
                <span class="bounty-badge" style="font-size: 1.2rem; padding: 8px 16px;">{{ books|length }} üìö</span>
            </h2>
            <p style="color: var(--marine-blue); margin-top: 5px; font-size: 1.1rem; font-style: italic;">
                –ó–∞–ø–∏—Å–∏ –æ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è—Ö –Ω–∞ –ø—É—Ç–∏ –∫ One Piece
            </p>
        </div>
        <div style="display: flex; align-items: center; gap: 15px;">
            <span style="color: var(--straw-hat-yellow); font-weight: bold; font-size: 1.2rem; background: rgba(255, 214, 0, 0.2); padding: 8px 15px; border-radius: 20px; border: 2px solid var(--straw-hat-yellow);">
                <i class="fas fa-crown"></i> –ö–ê–ü–ò–¢–ê–ù {{ current_user.username }}
                <span class="bounty-badge" style="margin-left: 10px;">{{ (current_user.id * 500)|int }}‡∏ø</span>
            </span>
        </div>
    </div>

    <div class="card-body">
        <!-- –ù–æ–≤—ã–π –ª–æ–≥–±—É–∫ - –ö–∞—Ä—Ç–∞ —Å–æ–∫—Ä–æ–≤–∏—â -->
        <div class="card" style="background: linear-gradient(135deg, rgba(255, 248, 225, 0.9), rgba(255, 235, 59, 0.3)); border: 4px dashed var(--straw-hat-yellow); margin-bottom: 40px;">
            <h3 style="color: var(--marine-blue); margin-bottom: 20px; text-align: center; font-size: 1.5rem; font-family: 'Pirata One', cursive;">
                <i class="fas fa-map-marked-alt" style="color: var(--straw-hat-red);"></i> –°–û–°–¢–ê–í–ò–¢–¨ –ù–û–í–£–Æ –ö–ê–†–¢–£
            </h3>
            <form method="POST" action="{{ url_for('books.add_book') }}">
                <div style="display: grid; grid-template-columns: 1fr 1fr auto; gap: 15px; align-items: end;">
                    <div>
                        <input type="text" name="title" class="form-control"
                               placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –æ—Å—Ç—Ä–æ–≤–∞/–ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è" required
                               style="text-align: center; font-size: 1.1rem;">
                        <small style="color: var(--grand-line-blue); display: block; text-align: center; margin-top: 8px;">
                            <i class="fas fa-island-tropical"></i> –ö—É–¥–∞ –º—ã –ø–ª—ã–≤—ë–º?
                        </small>
                    </div>
                    <div>
                        <input type="text" name="author" class="form-control"
                               placeholder="–ö—Ç–æ –æ—Ç–∫—Ä—ã–ª/–æ–ø–∏—Å–∞–ª" required
                               style="text-align: center; font-size: 1.1rem;">
                        <small style="color: var(--grand-line-blue); display: block; text-align: center; margin-top: 8px;">
                            <i class="fas fa-user-pirate"></i> –ß—å—è —ç—Ç–æ –∑–∞—Å–ª—É–≥–∞?
                        </small>
                    </div>
                    <div>
                        <button type="submit" class="btn btn-primary" style="height: 50px; min-width: 120px; font-size: 1.1rem;">
                            <i class="fas fa-feather-alt"></i> –ó–ê–ü–ï–ß–ê–¢–ê–¢–¨
                        </button>
                    </div>
                </div>
            </form>
        </div>

        <!-- –ê—Ä—Ö–∏–≤ –ª–æ–≥–±—É–∫–æ–≤ -->
        <h3 style="color: var(--straw-hat-red); margin-bottom: 25px; border-bottom: 3px solid var(--straw-hat-red); padding-bottom: 15px; font-size: 1.8rem; font-family: 'Pirata One', cursive;">
            <i class="fas fa-archive"></i> –ê–†–•–ò–í –ü–†–ò–ö–õ–Æ–ß–ï–ù–ò–ô
            <span style="color: var(--marine-blue); font-size: 1rem; float: right;">
                –í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π –≤ –ª–æ–≥–±—É–∫–µ: {{ books|length }}
            </span>
        </h3>

        {% if books %}
        <ul class="book-list">
            {% for book in books %}
            <li class="book-item fade-in" style="animation-delay: {{ loop.index * 0.1 }}s;">
                <div class="book-content">
                    <div class="book-title" style="font-size: 1.3rem;">
                        <i class="fas fa-book-open" style="color: var(--straw-hat-red);"></i> ¬´{{ book.title }}¬ª
                    </div>
                    <div class="book-author" style="font-size: 1.1rem;">
                        <i class="fas fa-user-secret" style="color: var(--devil-fruit-purple);"></i> –ê–≤—Ç–æ—Ä-–ø–µ—Ä–≤–æ–æ—Ç–∫—Ä—ã–≤–∞—Ç–µ–ª—å: {{ book.author }}
                    </div>
                </div>
                <div class="book-actions">
                    <a href="{{ url_for('books.view_book', book_id=book.id) }}"
                       class="btn btn-info btn-icon"
                       title="–ò–∑—É—á–∏—Ç—å –∫–∞—Ä—Ç—É">
                        <i class="fas fa-eye"></i>
                    </a>
                    <a href="{{ url_for('books.edit_book', book_id=book.id) }}"
                       class="btn btn-secondary btn-icon"
                       title="–ü–µ—Ä–µ—Ä–∏—Å–æ–≤–∞—Ç—å –∫–∞—Ä—Ç—É">
                        <i class="fas fa-edit"></i>
                    </a>
                    <a href="{{ url_for('books.delete_book', book_id=book.id) }}"
                       class="btn btn-danger btn-icon"
                       onclick="return confirmPirate('–°–∂–µ—á—å —ç—Ç—É –∫–∞—Ä—Ç—É? –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ –±—É–¥–µ—Ç –∑–∞–±—ã—Ç–æ –Ω–∞–≤—Å–µ–≥–¥–∞!')"
                       title="–°–∂–µ—á—å –∫–∞—Ä—Ç—É">
                        <i class="fas fa-fire"></i>
                    </a>
                </div>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <div class="card" style="text-align: center; padding: 60px 40px; background: rgba(255, 248, 225, 0.8); border: 4px dashed var(--straw-hat-yellow); border-radius: 20px;">
            <div style="font-size: 5rem; color: var(--straw-hat-yellow); margin-bottom: 30px; opacity: 0.7;">
                <i class="fas fa-book-dead"></i>
            </div>
            <h3 style="color: var(--marine-blue); margin-bottom: 20px; font-size: 1.8rem; font-family: 'Pirata One', cursive;">
                –õ–û–ì–ë–£–ö –ü–£–°–¢
            </h3>
            <p style="color: var(--pirate-black); max-width: 500px; margin: 0 auto; font-size: 1.1rem; line-height: 1.6; font-style: italic;">
                –ù–∏ –æ–¥–Ω–∞ –∫–∞—Ä—Ç–∞ –Ω–µ –ª–µ–∂–∏—Ç –≤ —ç—Ç–æ–º —Å—É–Ω–¥—É–∫–µ. –¢–≤–æ—ë –ø–µ—Ä–≤–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞–Ω–µ—Ç –Ω–∞—á–∞–ª–æ–º –ª–µ–≥–µ–Ω–¥—ã!
                –í—Å–ø–æ–º–Ω–∏: –¥–∞–∂–µ –ì–æ–ª –î. –†–æ–¥–∂–µ—Ä –Ω–∞—á–∏–Ω–∞–ª —Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞.
            </p>
        </div>
        {% endif %}
    </div>
</div>

<!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞–≤–∞–Ω–∏—è -->
<div class="card fade-in" style="margin-top: 40px; border-image: linear-gradient(45deg, var(--bounty-gold), var(--straw-hat-yellow)) 1;">
    <div class="card-header">
        <h3 class="card-title" style="font-size: 1.8rem;">
            <i class="fas fa-chart-line" style="color: var(--devil-fruit-purple);"></i> –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–õ–ê–í–ê–ù–ò–Ø
        </h3>
    </div>
    <div class="card-body">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 25px;">
            <div style="text-align: center; padding: 25px; background: linear-gradient(135deg, rgba(198, 40, 40, 0.1), rgba(255, 82, 82, 0.1)); border: 3px solid var(--straw-hat-red); border-radius: 15px;">
                <div style="font-size: 3rem; font-weight: bold; color: var(--straw-hat-red); margin-bottom: 10px; font-family: 'Pirata One', cursive;">
                    {{ books|length }}
                </div>
                <div style="color: var(--marine-blue); text-transform: uppercase; font-size: 1rem; font-weight: bold;">
                    <i class="fas fa-book"></i> –ö–∞—Ä—Ç –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
                </div>
            </div>

            <div style="text-align: center; padding: 25px; background: linear-gradient(135deg, rgba(21, 101, 192, 0.1), rgba(33, 150, 243, 0.1)); border: 3px solid var(--nakama-blue); border-radius: 15px;">
                <div style="font-size: 3rem; font-weight: bold; color: var(--nakama-blue); margin-bottom: 10px; font-family: 'Pirata One', cursive;">
                    {{ current_user.id|default(1) }}
                </div>
                <div style="color: var(--marine-blue); text-transform: uppercase; font-size: 1rem; font-weight: bold;">
                    <i class="fas fa-sun"></i> –£—Ä–æ–≤–µ–Ω—å –ø–∏—Ä–∞—Ç–∞
                </div>
            </div>

            <div style="text-align: center; padding: 25px; background: linear-gradient(135deg, rgba(255, 152, 0, 0.1), rgba(255, 179, 0, 0.1)); border: 3px solid var(--bounty-gold); border-radius: 15px;">
                <div style="font-size: 3rem; font-weight: bold; color: var(--bounty-gold); margin-bottom: 10px; font-family: 'Pirata One', cursive;">
                    {% if books|length > 0 %}
                        {{ (books|length * 2500)|int }}
                    {% else %}
                        0
                    {% endif %}
                </div>
                <div style="color: var(--marine-blue); text-transform: uppercase; font-size: 1rem; font-weight: bold;">
                    <i class="fas fa-coins"></i> –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –≥–æ–ª–æ–≤—É
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –¶–∏—Ç–∞—Ç–∞ –ë–µ–ª–æ—É—Å–∞ -->
<div class="card fade-in" style="margin-top: 40px; background: linear-gradient(135deg, rgba(128, 222, 234, 0.2), rgba(3, 169, 244, 0.2)); border: 3px solid var(--all-blue);">
    <div class="card-body" style="text-align: center; padding: 40px;">
        <div style="font-size: 2.5rem; color: var(--all-blue); margin-bottom: 20px;">
            <i class="fas fa-quote-left"></i>
        </div>
        <p style="font-size: 1.3rem; color: var(--marine-blue); line-height: 1.6; font-style: italic; max-width: 700px; margin: 0 auto;">
            "–ú–µ—á—Ç—ã... –£ –ø–∞—Ä–Ω–µ–π –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–Ω—á–∞—é—Ç—Å—è —Å–Ω—ã!"
        </p>
        <div style="color: var(--all-blue); font-size: 1.1rem; margin-top: 20px; font-family: 'Pirata One', cursive;">
            ‚Äî –ú–∞—Ä—à–∞–ª –î. –¢–∏—á (–ß—ë—Ä–Ω–∞—è –ë–æ—Ä–æ–¥–∞)
        </div>
        <div style="margin-top: 30px;">
            <span class="bounty-badge" style="font-size: 1.1rem; padding: 10px 20px; background: linear-gradient(45deg, var(--pirate-black), #424242);">2,247,600,000‡∏ø</span>
        </div>
    </div>
</div>

<!-- –ü–æ–¥—Å–∫–∞–∑–∫–∏ –æ—Ç –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä–∞ -->
<div style="text-align: center; color: var(--marine-blue); padding: 30px 0; font-size: 1rem; max-width: 800px; margin: 40px auto; background: rgba(255, 255, 255, 0.8); border-radius: 15px; border: 2px solid var(--straw-hat-yellow);">
    <h4 style="color: var(--straw-hat-red); margin-bottom: 15px; font-size: 1.2rem; font-family: 'Pirata One', cursive;">
        <i class="fas fa-compass"></i> –°–û–í–ï–¢–´ –®–¢–£–†–ú–ê–ù–ê
    </h4>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
        <div>
            <i class="fas fa-lightbulb" style="color: var(--straw-hat-yellow); margin-right: 8px;"></i>
            –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∑–∞–ø–∏—Å–∏ —Å–ø–∞—Å–∞—é—Ç –≤ —à—Ç–æ—Ä–º
        </div>
        <div>
            <i class="fas fa-user-friends" style="color: var(--nakama-blue); margin-right: 8px;"></i>
            –î–µ–ª–∏—Å—å –∑–Ω–∞–Ω–∏—è–º–∏ —Å –∫–æ–º–∞–Ω–¥–æ–π
        </div>
        <div>
            <i class="fas fa-sync-alt" style="color: var(--grand-line-blue); margin-right: 8px;"></i>
            –ö–∞—Ä—Ç—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
        </div>
    </div>
</div>

<!-- –ö–Ω–æ–ø–∫–∞ –±—ã—Å—Ç—Ä–æ–≥–æ –≤–æ–∑–≤—Ä–∞—Ç–∞ -->
<div style="text-align: center; margin-top: 30px;">
    <a href="{{ url_for('index') }}" class="btn btn-secondary" style="padding: 15px 30px; font-size: 1.1rem;">
        <i class="fas fa-anchor" style="margin-right: 10px;"></i>
        –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é –ø–∞–ª—É–±—É
    </a>
</div>
{% endblock %}